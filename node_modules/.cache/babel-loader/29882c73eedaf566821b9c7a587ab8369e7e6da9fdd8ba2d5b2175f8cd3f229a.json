{"ast":null,"code":"import store from './store';\nimport { useLayout } from '@/layout/composables/layout';\nexport default {\n  name: 'App',\n  computed: {\n    messages: () => store.getters.get_messages\n  },\n  mounted() {\n    store.commit('basic', {\n      key: 'token',\n      value: localStorage.getItem('access')\n    });\n    const {\n      changeThemeSettings,\n      layoutConfig\n    } = useLayout();\n    const url = new URL(window.location.href);\n    if (url.searchParams.get('light') !== null) {\n      const mode = url.searchParams.get('light') === '0' ? false : true;\n      store.commit('basic', {\n        key: 'darkMode',\n        value: true\n      });\n      const theme = mode ? 'lara-light-indigo' : 'lara-dark-indigo';\n      localStorage.setItem('dark', !mode);\n      const elementId = 'theme-css';\n      const linkElement = document.getElementById(elementId);\n      const cloneLinkElement = linkElement.cloneNode(true);\n      const newThemeUrl = linkElement.getAttribute('href').replace(layoutConfig.theme.value, theme);\n      cloneLinkElement.setAttribute('id', elementId + '-clone');\n      cloneLinkElement.setAttribute('href', newThemeUrl);\n      cloneLinkElement.addEventListener('load', () => {\n        linkElement.remove();\n        cloneLinkElement.setAttribute('id', elementId);\n        changeThemeSettings(theme, mode);\n      });\n      linkElement.parentNode.insertBefore(cloneLinkElement, linkElement.nextSibling);\n    }\n  }\n};","map":{"version":3,"mappings":"AACA,OAAOA,KAAI,MAAO,SAAS;AAC3B,SAAQC,SAAS,QAAO,6BAA6B;AAErD,eAAe;EACXC,IAAI,EAAE,KAAK;EACXC,QAAQ,EAAE;IACNC,QAAQ,EAAE,MAAMJ,KAAK,CAACK,OAAO,CAACC;EAClC,CAAC;EACDC,OAAO,GAAG;IACNP,KAAK,CAACQ,MAAM,CAAC,OAAO,EAAE;MAACC,GAAG,EAAE,OAAO;MAAEC,KAAK,EAAEC,YAAY,CAACC,OAAO,CAAC,QAAQ;IAAC,CAAC;IAE3E,MAAM;MAACC,mBAAmB;MAAEC;IAAY,IAAIb,SAAS,EAAE;IACvD,MAAMc,GAAE,GAAI,IAAIC,GAAG,CAACC,MAAM,CAACC,QAAQ,CAACC,IAAI;IACxC,IAAIJ,GAAG,CAACK,YAAY,CAACC,GAAG,CAAC,OAAO,MAAM,IAAI,EAAE;MACxC,MAAMC,IAAG,GAAIP,GAAG,CAACK,YAAY,CAACC,GAAG,CAAC,OAAO,MAAM,GAAE,GAAI,KAAI,GAAI,IAAG;MAChErB,KAAK,CAACQ,MAAM,CAAC,OAAO,EAAE;QAACC,GAAG,EAAE,UAAU;QAAEC,KAAK,EAAE;MAAI,CAAC;MACpD,MAAMa,KAAI,GAAID,IAAG,GAAI,mBAAkB,GAAI,kBAAiB;MAC5DX,YAAY,CAACa,OAAO,CAAC,MAAM,EAAE,CAACF,IAAI;MAClC,MAAMG,SAAQ,GAAI,WAAW;MAC7B,MAAMC,WAAU,GAAIC,QAAQ,CAACC,cAAc,CAACH,SAAS,CAAC;MACtD,MAAMI,gBAAe,GAAIH,WAAW,CAACI,SAAS,CAAC,IAAI,CAAC;MACpD,MAAMC,WAAU,GAAIL,WAAW,CAACM,YAAY,CAAC,MAAM,CAAC,CAACC,OAAO,CAACnB,YAAY,CAACS,KAAK,CAACb,KAAK,EAAEa,KAAK,CAAC;MAC7FM,gBAAgB,CAACK,YAAY,CAAC,IAAI,EAAET,SAAQ,GAAI,QAAQ,CAAC;MACzDI,gBAAgB,CAACK,YAAY,CAAC,MAAM,EAAEH,WAAW,CAAC;MAClDF,gBAAgB,CAACM,gBAAgB,CAAC,MAAM,EAAE,MAAM;QAC5CT,WAAW,CAACU,MAAM,EAAE;QACpBP,gBAAgB,CAACK,YAAY,CAAC,IAAI,EAAET,SAAS,CAAC;QAC9CZ,mBAAmB,CAACU,KAAK,EAAED,IAAI,CAAC;MACpC,CAAC,CAAC;MACFI,WAAW,CAACW,UAAU,CAACC,YAAY,CAACT,gBAAgB,EAAEH,WAAW,CAACa,WAAW,CAAC;IAClF;EACJ;AACJ","names":["store","useLayout","name","computed","messages","getters","get_messages","mounted","commit","key","value","localStorage","getItem","changeThemeSettings","layoutConfig","url","URL","window","location","href","searchParams","get","mode","theme","setItem","elementId","linkElement","document","getElementById","cloneLinkElement","cloneNode","newThemeUrl","getAttribute","replace","setAttribute","addEventListener","remove","parentNode","insertBefore","nextSibling"],"sourceRoot":"","sources":["/app/src/App.vue"],"sourcesContent":["<script>\r\nimport store from './store';\r\nimport {useLayout} from '@/layout/composables/layout';\r\n\r\nexport default {\r\n    name: 'App',\r\n    computed: {\r\n        messages: () => store.getters.get_messages\r\n    },\r\n    mounted() { \r\n        store.commit('basic', {key: 'token', value: localStorage.getItem('access')})\r\n\r\n        const {changeThemeSettings, layoutConfig} = useLayout();\r\n        const url = new URL(window.location.href)\r\n        if (url.searchParams.get('light') !== null) {\r\n            const mode = url.searchParams.get('light') === '0' ? false : true\r\n            store.commit('basic', {key: 'darkMode', value: true})\r\n            const theme = mode ? 'lara-light-indigo' : 'lara-dark-indigo'\r\n            localStorage.setItem('dark', !mode)\r\n            const elementId = 'theme-css';\r\n            const linkElement = document.getElementById(elementId);\r\n            const cloneLinkElement = linkElement.cloneNode(true);\r\n            const newThemeUrl = linkElement.getAttribute('href').replace(layoutConfig.theme.value, theme);\r\n            cloneLinkElement.setAttribute('id', elementId + '-clone');\r\n            cloneLinkElement.setAttribute('href', newThemeUrl);\r\n            cloneLinkElement.addEventListener('load', () => {\r\n                linkElement.remove();\r\n                cloneLinkElement.setAttribute('id', elementId);\r\n                changeThemeSettings(theme, mode);\r\n            });\r\n            linkElement.parentNode.insertBefore(cloneLinkElement, linkElement.nextSibling);\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<template>\r\n    <Message class=\"position-absolute\" style=\"left: 15%; right: 15%; z-index: 2000;\"  v-for=\"msg of messages\" :severity=\"msg.severity\" :key=\"msg.content\"\r\n           :closable=\"msg.closable\" :icon=\"msg.icon\" :sticky=\"false\"><p style=\"color: #000\">{{ msg.content }}</p></Message>\r\n    <div v-if=\"!$route.path.startsWith('/frame')\" class=\"p-message-success text-center test-item\">{{ $t('Сайт работает в тестовом режиме, приносим извинения за возможные неудобства') }}</div>\r\n    <router-view />\r\n</template>\r\n\r\n<style scoped>\r\n.test-item {\r\n    font-size: 1vh;\r\n    line-height: 2vh;\r\n    position: fixed;\r\n    bottom: 0;\r\n    width: 100vw;\r\n    z-index: 10;\r\n    background-color: #86EFAC;\r\n    color: black;\r\n    padding: 5px;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}